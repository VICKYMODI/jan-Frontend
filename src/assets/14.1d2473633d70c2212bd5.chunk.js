webpackJsonp([14],{XIPq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("WT6e"),o=a("UoWM"),r=a("b8Rh"),n=a("bfOx"),c=a("Xjw4"),s=a("7DMc"),l=a("8nFs"),h=a("Sfd1"),p=a("MDd6"),d=a("z6At"),m=a("FQPb"),y=a("nhD7"),g=a("lgs7"),f=a("cMXj"),u=a("R4TA"),P=a("G336"),v=a("WqBc"),S=a("t+U8"),O=this&&this.__decorate||function(e,t,a,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(e,t,a,i,o,r,n,c,s){this.router=e,this.commonService=t,this.policyProfileService=a,this.modalService=i,this.workflowService=o,this.loginService=r,this.commonRepository=n,this.lc=c,this.bindService=s,this.SORT_BY=["POLICY_NO","APPLICANT","EFFECTIVE_DATE","AGENT","EMAIL","MOBILE_NO","UPDATE_DATETIME","POLICY_CREATED_DATE"],this.bsConfig=Object.assign({},{containerClass:"theme-red",dateInputFormat:"MM/DD/YYYY"}),this.policyDatesArray=[],this.pageLimitOptions=u.a.PAGE_NUMBER_LIMIT_OPTIONS,this.originalTotalElement=0,this.pagePosition=0,this.isOnline=!1,this.isDirectionDesc=!0,this.isSearchingQuotes=!0,this.policySearchResults=[],this.name1="",this._timeout=null,this.paginationConfig={totalPages:1,totalElements:0,boundaryLinks:!0,maxSize:6,rotate:!1,align:!0,firstText:"&laquo;",previousText:"&lsaquo;",nextText:"&rsaquo;",lastText:"&raquo;"},this.policySearchParam={limit:this.pageLimitOptions[2],pageNo:1,searchString:"",startDate:void 0,endDate:void 0,sortBy:this.SORT_BY[6],direction:this.isDirectionDesc?"DESC":"ASC",isOnline:this.isOnline}}return e.prototype.ngOnInit=function(){this.noteTypeEnumConstants=S.a.getNamesAndValuesByInputType(),null!=u.a.serachConstant&&(this.policySearchParam.searchString=u.a.serachConstant.searchString,this.policyDatesArray=u.a.serachConstant.policyDates,this.policySearchParam.pageNo=u.a.serachConstant.pageNUmber,this.pagePosition=u.a.serachConstant.scrollPosition,u.a.serachConstant.isOnline&&(this.policySearchParam.isOnline=u.a.serachConstant.isOnline,this.isOnline=u.a.serachConstant.isOnline)),null!=this.policyDatesArray&&this.onCreatedDateRangeChanged(this.policyDatesArray),this.commonService.clearAlertMessage(),this.commonService.removeLocalStorageItem(u.a.COOKIE_POLICY_STATUS),this.commonService.removeLocalStorageItem(u.a.COOKIE_POLICY),this.commonService.removeLocalStorageItem(u.a.COOKIE_POLICY_VERSION),this.commonService.checkLoginAndRedirect(u.b.EMPLOYE)&&(this.user=this.commonService.getLoginUserDetails(),$(".scrollbar-inner").css({height:$(document).height()-$(".sidebar-head").height()}),this.workflowService.resetSteps(),this.workflowService.removeWorkFlowFromLocalStorage(),this.searchPolicyProfileByApplcantOrQuoteNumber(!1))},e.prototype.changePage=function(){""!=this.policySearchParam.searchString&&(this.policySearchParam.pageNo=1)},e.prototype.searchPolicyProfileByApplcantOrQuoteNumber=function(e){var t=this;this._timeout&&window.clearTimeout(this._timeout),this._timeout=window.setTimeout(function(){t._timeout=null,t.lc.run(function(){t.commonService.clearAlertMessage(),t.isSearchingQuotes=!0,t.policySearchResultsMessage=void 0,t.policySearchResults=[],e||(t.policySearchParam.pageNo=u.a.serachConstant.pageNUmber);var a=JSON.parse(JSON.stringify(t.policySearchParam));a.pageNo-=1,u.a.serachConstant.searchString=a.searchString,t.searchPolicyProfileByApplcantOrQuoteNumberObs&&t.searchPolicyProfileByApplcantOrQuoteNumberObs.unsubscribe(),t.searchPolicyProfileByApplcantOrQuoteNumberObs=t.policyProfileService.searchPolicyProfileByApplcantOrQuoteNumber(a).subscribe(function(e){t.isSearchingQuotes=!1,e&&e.data&&e.data.content&&e.data.content.length>0?(t.policySearchResults=e.data.content,t.originalTotalElement=e.data.totalElements,t.paginationConfig.totalElements=e.data.totalElements/(t.policySearchParam.limit/10),t.paginationConfig.totalPages=e.data.totalPages,t.paginationConfig.maxSize=e.data.totalPages<6?e.data.totalPages:6):(t.policySearchResultsMessage=e.message,t.paginationConfig.totalElements=0,t.paginationConfig.totalPages=0),t.searchPolicyProfileByApplcantOrQuoteNumberObs=void 0,setTimeout(function(){$("#pageLimitDropDown").selectpicker("refresh")},10)},function(e){(0==e.status||JSON.parse(e._body).error)&&t.loginService.checkErrorResponse(e),t.commonService.showErrorMessage(JSON.parse(e._body).message),t.paginationConfig.totalElements=0,t.paginationConfig.totalPages=0,t.searchPolicyProfileByApplcantOrQuoteNumberObs=void 0}),u.a.serachConstant.scrollPosition>0&&t.commonService.adjustTopScrollBarToPreviousPosition(u.a.serachConstant.scrollPosition)})},500)},e.prototype.onCreatedDateRangeChanged=function(e){e&&2===e.length&&(this.policySearchParam.startDate=this.commonService.convertDateIntoString(new Date(e[0]),u.a.JAVA_DATE_FORMAT),this.policySearchParam.endDate=this.commonService.convertDateIntoString(new Date(e[1]),u.a.JAVA_DATE_FORMAT),u.a.serachConstant.policyDates=[e[0],e[1]],this.policySearchResults=[],this.policySearchParam.sortBy=this.SORT_BY[7],this.policySearchParam.direction="DESC",this.policySearchParam.pageNo=0,this.searchPolicyProfileByApplcantOrQuoteNumber(!1))},e.prototype.getAllOrOnlinePolicy=function(e){this.policySearchResults=[],u.a.serachConstant.isOnline=this.isOnline,this.policySearchParam.direction="DESC",this.policySearchParam.pageNo=0,this.policySearchParam.isOnline=this.isOnline,this.searchPolicyProfileByApplcantOrQuoteNumber(!1)},e.prototype.pageChanged=function(e){this.policySearchParam.pageNo=e.page,u.a.serachConstant.scrollPosition=0,u.a.serachConstant.pageNUmber!=this.policySearchParam.pageNo?(u.a.serachConstant.pageNUmber=this.policySearchParam.pageNo,this.searchPolicyProfileByApplcantOrQuoteNumber(!0)):u.a.serachConstant.pageNUmber=this.policySearchParam.pageNo},e.prototype.sortByChanged=function(e){this.policySearchParam.sortBy=e,this.isDirectionDesc=!this.isDirectionDesc,this.policySearchParam.direction=this.isDirectionDesc?"DESC":"ASC",this.searchPolicyProfileByApplcantOrQuoteNumber(!0)},e.prototype.clearDatePicker=function(){u.a.serachConstant.policyDates=[],this.policySearchParam.startDate=void 0,this.policySearchParam.endDate=void 0,this.policyDatesArray=[],this.dateRangePicker.nativeElement.value="",this.policySearchParam.sortBy=this.SORT_BY[6],this.policySearchParam.direction="DESC",this.searchPolicyProfileByApplcantOrQuoteNumber(!1)},e.prototype.redirectToCustomerProfilePage=function(e,t){this.pagePosition=window.pageYOffset,u.a.serachConstant.scrollPosition=this.pagePosition,this.router.navigate([u.b.EMPLOYE+"/"+u.b.CUSTOMER_POLICY_PROFILE],{queryParams:{id:e,policyId:t}})},e.prototype.saveTouchPolicyByAgent=function(e,t){var a=this;this.policyProfileService.saveTouchPolicyByAgent(this.user.encryptedId,this.user.office.id,e,t).subscribe(function(e){},function(e){(0==e.status||JSON.parse(e._body).error)&&a.commonService.showErrorMessage(JSON.parse(e._body).message)})},e.prototype.downloadPDF=function(e){var t=this;this.commonService.clearAlertMessage(),this.bindService.downloadPDF(e.encryptedPolicyVersionId).subscribe(function(a){if(a.data.size>0){console.log(e.encryptedPolicyVersionId);var i=v.DOWNLOAD_PDF+"/"+e.encryptedPolicyVersionId+"/policy_receipt?access_token="+t.commonRepository.getToken();window.open(i).document.title="Policy Receipt"}else console.log("Empty size receipt"),t.commonService.showErrorMessage("No documents available.")},function(e){console.log("Receipt not found"),t.commonService.showErrorMessage("No documents available.")})},e.prototype.openNav=function(e,t){this.employeNoteComponent.loadNotesByPolicyId({isAddNoteAllowed:!1,openNoteSideBar:!0},e,t,this.noteTypeEnumConstants[2],null)},e.prototype.onPolicySearch=function(){null!=u.a.serachConstant&&(u.a.serachConstant.scrollPosition=0),this.searchPolicyProfileByApplcantOrQuoteNumber(!1),this.changePage()},e.prototype.closeNotes=function(){this.employeNoteComponent.closeNav()},O([Object(i.ViewChild)("dateRangePicker"),b("design:type",i.ElementRef)],e.prototype,"dateRangePicker",void 0),O([Object(i.ViewChild)("employeNoteComponent"),b("design:type",P.a)],e.prototype,"employeNoteComponent",void 0),e=O([Object(i.Component)({selector:"employePolicyProfile.component",template:a("cBse")}),b("design:paramtypes",[n.b,d.a,p.a,h.a,m.a,y.a,g.a,i.NgZone,f.a])],e)}(),D=[{path:"",component:C}],N=n.c.forChild(D);a.d(t,"EmployePolicyProfileModule",function(){return B});var T=this&&this.__decorate||function(e,t,a,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},B=function(){function e(){}return e=T([Object(i.NgModule)({imports:[c.CommonModule,s.FormsModule,s.ReactiveFormsModule,N,o.a.forRoot(),r.a.forRoot(),l.a,n.c],declarations:[C]})],e)}()},cBse:function(e,t){e.exports='<block-ui [template]="blockTemplate"> \r\n<section class="search-policy">\r\n    <div class="container">\r\n    \t<div class="row" *ngIf="commonService.alertMessageModel != null">\r\n\t\t\t<div class="col-sm-12">\r\n\t\t\t\t<alert-message></alert-message>\r\n\t\t\t</div>\r\n\t\t</div>\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="manage-user">\r\n                    <div class="panel panel-default">\r\n                        <div class="panel-heading">\r\n                            <div class="row">\r\n                                <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4">\r\n                                    <div class="table-search">\r\n                                        <input class="form-control"\r\n\t                                        type="text" name="searchText" [(ngModel)]="policySearchParam.searchString"\r\n\t                                        placeholder="Search by Policy no. or Applicant or Email or Mobile No or Full Name" \r\n\t                                        title="Search by Policy no. or Applicant or Email or Mobile No or Full Name"\r\n\t                                        (ngModelChange)="onPolicySearch();">\r\n                                        <a href="javascript:void(0)"><i class="fa fa-search fa-lg"></i></a>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="col-sm-3 col-lg-3 col-md-3 col-xs-3" *ngIf="user.office.officeLocation.locationName === \'DEFAULT\'">\r\n                                    <div class="checkbox">\r\n                                        <input class="magic-checkbox" type="checkbox" name="layout" id="1"\r\n                                            [(ngModel)]="isOnline" \r\n                                            (change)="getAllOrOnlinePolicy($event);" value="option">\r\n                                        <label for="1"></label> <label class="text" for="1">View\r\n                                             {{ isOnline ? \'all\' : \'Online\' }} policies</label>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                \r\n                                <div [ngClass]="user.office.officeLocation.locationName === \'DEFAULT\' ? \'col-xs-4 col-sm-4 col-md-4 col-lg-4\' : \'col-xs-6 col-sm-offset-0 col-sm-8 col-md-offset-1 col-md-7 col-lg-offset-2 col-lg-6\'">\r\n                                    <div class="filter-search">\r\n                                        <div class="row">\r\n                                            <div [ngClass]="user.office.officeLocation.locationName === \'DEFAULT\' ? \'form-group col-sm-12\' : \'form-group col-sm-8\'">\r\n                                                <div class="row">\r\n                                                    \x3c!-- <label class="col-lg-3 control-label" for="textinput"></label> --\x3e\r\n                                                    <div class="col-xs-12 col-sm-12">\r\n                                                        <input type="text" placeholder="Filter by creation date" \r\n                                                        \tclass="form-control white-background"\r\n                                                        \t#dateRangePicker\r\n                                                        \treadonly="readonly" \r\n                                                        \tbsDaterangepicker \r\n                                                        \t[bsConfig]="bsConfig" \r\n                                                        \t[bsValue]="policyDatesArray"\r\n                                                        \t(bsValueChange)="onCreatedDateRangeChanged($event)">\r\n                                                        <i class="fa fa-calendar fa-lg"></i>\r\n                                                        \r\n                                                        <a href="javascript:void(0)" [hidden]="policySearchParam.startDate == undefined || policySearchParam.endDate == undefined" class="clear-date-picker" (click)="clearDatePicker()"><i class="fa fa-times fa-lg"></i></a>\r\n\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            \x3c!-- <div class="col-sm-4 text-right">\r\n                                                <button class="btn btn-red" (click)="generateNewQuote()"><i class="fa fa-hourglass-end"></i> New Quote</button>\r\n                                            </div> --\x3e\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="table-responsive">\r\n                            <table class="table">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Sr. No.</th>\r\n                                        <th>\r\n                                            <a href="javascript:void(0)" (click)="sortByChanged(SORT_BY[0])">Policy No. \r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[0] && !isDirectionDesc" class="fa fa-sort-amount-asc" aria-hidden="true"></i>\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[0] && isDirectionDesc" class="fa fa-sort-amount-desc" aria-hidden="true"></i>\r\n                                            </a>\r\n                                        </th>\r\n                                        \x3c!-- <th>Quote Version</th> --\x3e\r\n                                        <th>\r\n                                            <a href="javascript:void(0)" (click)="sortByChanged(SORT_BY[1])">Applicant \r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[1] && !isDirectionDesc" class="fa fa-sort-amount-asc" aria-hidden="true"></i>\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[1] && isDirectionDesc" class="fa fa-sort-amount-desc" aria-hidden="true"></i>\r\n                                            </a>\r\n                                        </th>\r\n                                        <th>\r\n                                            <a href="javascript:void(0)" (click)="sortByChanged(SORT_BY[2])">Effective Date \r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[2] && !isDirectionDesc" class="fa fa-sort-amount-asc" aria-hidden="true"></i>\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[2] && isDirectionDesc" class="fa fa-sort-amount-desc" aria-hidden="true"></i>\r\n                                            </a>\r\n                                        </th>\r\n                                        <th>\r\n                                            <a href="javascript:void(0)" (click)="sortByChanged(SORT_BY[3])">Agent\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[3] && !isDirectionDesc" class="fa fa-sort-amount-asc" aria-hidden="true"></i>\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[3] && isDirectionDesc" class="fa fa-sort-amount-desc" aria-hidden="true"></i>\r\n                                            </a>\r\n                                        </th>\r\n                                        <th>\r\n                                            <a href="javascript:void(0)" (click)="sortByChanged(SORT_BY[4])">Email\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[4] && !isDirectionDesc" class="fa fa-sort-amount-asc" aria-hidden="true"></i>\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[4] && isDirectionDesc" class="fa fa-sort-amount-desc" aria-hidden="true"></i>\r\n                                            </a>\r\n                                        </th>\r\n                                        <th>\r\n                                            <a href="javascript:void(0)" (click)="sortByChanged(SORT_BY[5])">Mobile No.\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[5] && !isDirectionDesc" class="fa fa-sort-amount-asc" aria-hidden="true"></i>\r\n\t                                            <i *ngIf="policySearchParam.sortBy === SORT_BY[5] && isDirectionDesc" class="fa fa-sort-amount-desc" aria-hidden="true"></i>\r\n                                            </a>\r\n                                        </th>\r\n                                        <th>Actions</th>\r\n                                        \r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr *ngFor="let searchedPolicy of policySearchResults; let searchedPolicyIndex = index">\r\n                                        <td>{{ ((policySearchParam.pageNo-1) * policySearchParam.limit) + (searchedPolicyIndex + 1)}}</td>\r\n                                        <td><a href="javascript:void(0);" class="policy-seach-tr" (click)="redirectToCustomerProfilePage(searchedPolicy.encryptedCustomerId, searchedPolicy.encryptedPolicyId); saveTouchPolicyByAgent(searchedPolicy.encryptedPolicyId,searchedPolicy.encryptedPolicyVersionId)">\r\n                                                {{searchedPolicy.policyNumber}}\r\n                                                </a></td>\r\n                                        <td>{{searchedPolicy.name | ellipsis:25}}</td>\r\n                                        <td>{{searchedPolicy.effectiveDate}}</td>\r\n                                        <td>{{searchedPolicy.agent | ellipsis:20}}</td>\r\n                                        <td>{{searchedPolicy.email | ellipsis:20}}</td>\r\n                                        <td>{{searchedPolicy.mobileNo | PhoneNoFormatter }}</td>\r\n                                    \t<td align="center">\r\n                                    \t\t<a *ngIf="searchedPolicy.finalPdfPath" href="javascript:void(0)" (click)="downloadPDF(searchedPolicy)" title="View Receipt">\r\n                                        \t\t<i class="fa fa-lg fa fa-download" aria-hidden="true"></i>\r\n                                       \t\t</a>\r\n                                       \t\t\r\n                                       \t\t<a href="javascript:void(0)" (click)="openNav(searchedPolicy.encryptedPolicyId, searchedPolicy.encryptedPolicyVersionId)" title="Notes">\r\n                                        \t\t<i class="fa fa-lg fa-file-text-o" aria-hidden="true"></i>\r\n                                       \t\t</a>\r\n                                       \t\t\r\n                                       \t</td>\r\n                                    \r\n                                    \r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        \r\n                        <div class="row" *ngIf="paginationConfig.totalPages > 1">\r\n                     \t\t\r\n\x3c!--                      \t\t<div class="col-sm-4 col-xs-12 pagination-limit"> --\x3e\r\n\x3c!--                      \t\t\t<p class="col-sm-3 col-xs-4">Show :</p> --\x3e\r\n\x3c!--                      \t\t\t<select class="selectpicker col-sm-3 col-xs-4" id="pageLimitDropDown" [(ngModel)]="policySearchParam.limit" (change)="searchPolicyProfileByApplcantOrQuoteNumber(true)"> --\x3e\r\n\x3c!--                      \t\t\t\t<option *ngFor="let pageLimit of pageLimitOptions" [value]="pageLimit">{{pageLimit}}</option> --\x3e\r\n\x3c!--                    \t\t\t\t</select> --\x3e\r\n\x3c!--                      \t\t</div> --\x3e\r\n                     \r\n                            <div class="col-md-6 col-sm-8 col-xs-12 pull-right text-right pagination-size">\r\n                                <pagination\r\n                                \t[(ngModel)] = "policySearchParam.pageNo"\r\n\t                                [totalItems]="paginationConfig.totalElements" \r\n\t                                [boundaryLinks] = "paginationConfig.boundaryLinks"\r\n\t                                [maxSize] = "paginationConfig.maxSize"\r\n\t                                [rotate] = "paginationConfig.rotate"\r\n\t                                align = "paginationConfig.align"\r\n\t                                [firstText] = "paginationConfig.firstText"\r\n\t                                [previousText] = "paginationConfig.previousText"\r\n\t                                [nextText] = "paginationConfig.nextText"\r\n\t                                [lastText] = "paginationConfig.lastText"\r\n\t                                (pageChanged)="pageChanged($event)">\r\n                                </pagination>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div class="row" *ngIf="isSearchingQuotes">\r\n                        \t<div class="col-sm-12" style="padding: 15px;">\r\n                        \t\t<h2 class="text-center">Loading Recent Policies....</h2>\r\n                        \t</div>\r\n                        </div>\r\n\r\n                        <div class="row" *ngIf="!isSearchingQuotes && (policySearchResults === undefined || policySearchResults.length === 0)">\r\n                        \t<div class="col-sm-12" style="padding: 15px;">\r\n                        \t\t<h2 class="text-center">{{policySearchResultsMessage}}</h2>\r\n                        \t</div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<div class="overlay" (click)="closeNotes()"></div>\r\n<employeNote-component #employeNoteComponent></employeNote-component>\r\n\r\n</block-ui>\r\n'}});